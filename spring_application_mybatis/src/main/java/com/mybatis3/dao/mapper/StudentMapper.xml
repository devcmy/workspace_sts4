<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis3.dao.mapper.StudentMapper">
	
<!--/**************************************************
 	* 				SELECT
 	**************************************************/
	/*
	 * A.select sql의결과타입이 DTO,VO,Domain객체인경우 resultType : DTO,VO,Domain
	 */ -->
	<select id="findStudentById"
			parameterType="int"
			resultType="com.mybatis3.domain.Student">
		select * from students where stud_id = #{studId}
	</select>
	<select id="findAllStudents" resultType="com.mybatis3.domain.Student">
		select stud_id, name, email,dob from students
	</select>
	
	<!-- /*
	 * B. select sql의결과타입이 Wrapper,String 객체인경우 resultType : Wrapper, String
	 */ -->
	<select id="findStudentNameById" parameterType="java.lang.Integer" resultType="java.lang.String">
		select name from students where stud_id=#{studId}
	</select>

	<select id="findStudentNameList" resultType="java.lang.String">
		select name from students
	</select>
	
<!-- /***********************************
	 *             INSERT
	 ***********************************/ 
	 parameterType : DTO,VO,Domain // (insert,update,delete는 resultType 기술하지 않음.(어차피 결과타입은 기승전 integer))
	 -->
	 <insert id="insertStudent" parameterType="com.mybatis3.domain.Student" >
	 	insert into students(stud_id,name,email,dob) 
	 	values (#{studId},#{name},#{email},#{dob})  <!-- property가 #{} 안에 기술 -->
	 </insert>
	 
	 <insert id="insertStudentBySequence1" parameterType="com.mybatis3.domain.Student"> <!-- PK사용(얻을수x) x -->
	 
	 	insert into students(stud_id,name,email,dob) 
	 	values (STUDENTS_STUD_ID_SEQ.nextval,#{name},#{email},#{dob})
	 	
	 </insert>
	 
	 <insert id="insertStudentBySequence2" parameterType="com.mybatis3.domain.Student"> <!-- PK사용(얻을수있다) o -->
	 	<selectKey order="BEFORE" resultType="int" keyProperty="studId"> <!-- key값 얻어서 stud id보관 -->
	 		select students_stud_id_seq.nextval from dual <!--  가상테이블 dual 이용 -->
	 	</selectKey>
	 	insert into students(stud_id,name,email,dob) 
	 	values (#{studId},#{name},#{email},#{dob})
	 </insert>
<!-- /***********************************
	 *             UPDATE
	 **************************************/  
	 parameterType : DTO,VO,Domain // (insert,update,delete는 resultType 기술하지 않음.(어차피 결과타입은 기승전 integer))
	 -->
	 
	 <update id="updateStudentById" parameterType="com.mybatis3.domain.Student"> 
		update students 
		set name=#{name}, email=#{email}, dob=#{dob} <!-- 들어오는 값은 property값 기준 -->
		where stud_id=#{studId}	 
	 
	 </update>
	 
<!-- /***********************************
	 *             DELETE
	 **************************************/  
	 parameterType : int, java.lang.String
	 -->
	 
	 <delete id="deleteStudentById" parameterType="int">
	 	delete from students where stud_id=#{studId}
	 </delete>
	 
	 <delete id="deleteStudentByName" parameterType="String">
	 	delete from students where name=#{name}
	 </delete>
	 
	 
</mapper>